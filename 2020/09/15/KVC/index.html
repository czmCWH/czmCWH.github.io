<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="KVC"><meta name="keywords" content="iOS"><meta name="author" content="Czm"><meta name="copyright" content="Czm"><title>KVC | Czm</title><link rel="shortcut icon" href="/img/my-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  }
} </script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="åˆ‡æ¢æ–‡ç« è¯¦æƒ…">åˆ‡æ¢ç«™ç‚¹æ¦‚è§ˆ</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#KVCåŸºæœ¬æ¦‚å¿µ"><span class="toc-number">1.</span> <span class="toc-text">KVCåŸºæœ¬æ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#KVCçš„ä½œç”¨"><span class="toc-number">1.1.</span> <span class="toc-text">KVCçš„ä½œç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#KVCå¯ä»¥æ‰§è¡Œçš„æ“ä½œ"><span class="toc-number">2.</span> <span class="toc-text">KVCå¯ä»¥æ‰§è¡Œçš„æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#KVCè®¿é—®å¯¹è±¡çš„å±æ€§"><span class="toc-number">2.1.</span> <span class="toc-text">KVCè®¿é—®å¯¹è±¡çš„å±æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ç”¨Key-å’Œ-key-path-æ ‡è¯†å¯¹è±¡çš„å±æ€§"><span class="toc-number">2.1.1.</span> <span class="toc-text">ç”¨Key å’Œ key path æ ‡è¯†å¯¹è±¡çš„å±æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨-Key-è®¾ç½®å±æ€§å€¼"><span class="toc-number">2.1.2.</span> <span class="toc-text">ä½¿ç”¨ Key è®¾ç½®å±æ€§å€¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨-Key-è·å–å±æ€§çš„å€¼"><span class="toc-number">2.1.3.</span> <span class="toc-text">ä½¿ç”¨ Key è·å–å±æ€§çš„å€¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KVCæ“ä½œé›†åˆå±æ€§"><span class="toc-number">2.2.</span> <span class="toc-text">KVCæ“ä½œé›†åˆå±æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨é›†åˆè¿ç®—ç¬¦"><span class="toc-number">2.3.</span> <span class="toc-text">ä½¿ç”¨é›†åˆè¿ç®—ç¬¦</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Aggregation-Operators"><span class="toc-number">2.3.1.</span> <span class="toc-text">Aggregation Operators</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Array-Operators"><span class="toc-number">2.3.2.</span> <span class="toc-text">Array Operators</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nesting-Operators"><span class="toc-number">2.3.3.</span> <span class="toc-text">Nesting Operators</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è®¿é—®éå¯¹è±¡å±æ€§"><span class="toc-number">2.4.</span> <span class="toc-text">è®¿é—®éå¯¹è±¡å±æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#éªŒè¯å±æ€§"><span class="toc-number">2.5.</span> <span class="toc-text">éªŒè¯å±æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è®¿é—®æœç´¢æ¨¡å¼"><span class="toc-number">2.6.</span> <span class="toc-text">è®¿é—®æœç´¢æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸºæœ¬çš„-Getter-æœç´¢æ¨¡å¼"><span class="toc-number">2.6.1.</span> <span class="toc-text">åŸºæœ¬çš„ Getter æœç´¢æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸºæœ¬çš„-Setter-æœç´¢æ¨¡å¼"><span class="toc-number">2.6.2.</span> <span class="toc-text">åŸºæœ¬çš„ Setter æœç´¢æ¨¡å¼</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#KVCå­—å…¸è½¬æ¨¡å‹"><span class="toc-number">3.</span> <span class="toc-text">KVCå­—å…¸è½¬æ¨¡å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å­¦ä¹ åšå®¢"><span class="toc-number">4.</span> <span class="toc-text">å­¦ä¹ åšå®¢</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="avatar.jpeg"></div><div class="author-info__name text-center">Czm</div><div class="author-info__description text-center">å­¦ä¹ è®°å½•</div><div class="follow-button"><a href="https://github.com/czmCWH" target="_blank" rel="noopener">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">æ–‡ç« </span><span class="pull-right">20</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">æ ‡ç­¾</span><span class="pull-right">7</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">åˆ†ç±»</span><span class="pull-right">8</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://www.cnswift.org/about-swift" target="_blank" rel="noopener">swiftä¸­æ–‡æ–‡æ¡£</a><a class="author-info-links__name text-center" href="https://swift.gg" target="_blank" rel="noopener">SwiftGG</a><a class="author-info-links__name text-center" href="http://chuangzaoshi.com" target="_blank" rel="noopener">åˆ›é€ ç‹®å¯¼èˆª</a><a class="author-info-links__name text-center" href="http://lib.xcz.im/library" target="_blank" rel="noopener">ã€Šè¥¿çª—çƒ›ã€‹</a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Czm</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/About">å…³äº</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">KVC</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-09-15</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/iOS/">iOS</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/iOS/Foundation/">Foundation</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="KVCåŸºæœ¬æ¦‚å¿µ"><a href="#KVCåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="KVCåŸºæœ¬æ¦‚å¿µ"></a>KVCåŸºæœ¬æ¦‚å¿µ</h2><p><code>Key-Value Coding</code>(ç®€ç§°<code>KVC</code>)æ˜¯ç”± <code>NSKeyValueCoding</code> éæ­£å¼åè®®å¯ç”¨çš„ä¸€ç§æœºåˆ¶ï¼Œå¯¹è±¡é‡‡ç”¨è¿™ç§æœºåˆ¶æ¥æä¾›å¯¹ å…¶å±æ€§çš„é—´æ¥è®¿é—®ã€‚</p>
<p>å½“å¯¹è±¡ç¬¦åˆ<code>Key-Value Coding</code>æ ‡å‡†æ—¶ï¼Œå¯ä»¥é€šè¿‡ç®€æ´ã€ç»Ÿä¸€çš„ æ¶ˆæ¯ä¼ é€’æ¥å£ é€šè¿‡ å­—ç¬¦ä¸²å‚æ•° è®¿é—®å…¶å±æ€§ã€‚è¿™ç§é—´æ¥è®¿é—®æœºåˆ¶è¡¥å……äº†å®ä¾‹å˜é‡åŠå…¶å…³è”çš„è®¿é—®å™¨æ–¹æ³•æä¾›çš„ç›´æ¥è®¿é—®ã€‚</p>
<a id="more"></a>

<p>ä»¥ä¸‹ä»£ç æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨<code>KVC</code>è¿›è¡Œçš„æ“ä½œï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Car</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>)<span class="built_in">NSInteger</span> price;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@class</span> <span class="title">ZMCar</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªZMPersonç±»</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ZMPerson</span> : <span class="title">NSObject</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">@private</span></span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>)<span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)ZMCar *bus;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>)<span class="built_in">NSString</span> *sex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ZMPerson</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">float</span> _height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)init &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">        _sex = <span class="string">@"ç”·ç”Ÿ"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">ZMCar *c = [[ZMCar alloc] init];</span><br><span class="line">ZMPerson *p = [[ZMPerson alloc] init];</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.KVCç›´æ¥ç»™å¯¹è±¡çš„å±æ€§èµ‹å€¼,å¹¶ä¸”è‡ªåŠ¨åˆ¤æ–­å…¶ç±»å‹</span></span><br><span class="line">[p setValue:<span class="string">@"zhangsan"</span> forKey:<span class="string">@"name"</span>];</span><br><span class="line">[c setValue:<span class="string">@"21$"</span> forKey:<span class="string">@"price"</span>];</span><br><span class="line">[p setValue:c forKey:<span class="string">@"bus"</span>];</span><br><span class="line">    </span><br><span class="line"><span class="comment">//2.KVCè®¾ç½®ç§æœ‰å®ä¾‹å˜é‡ã€@privateçš„å®ä¾‹å˜é‡çš„å€¼ã€readonlyå±æ€§ä¿®é¥°çš„å˜é‡</span></span><br><span class="line">[p setValue:<span class="string">@"22"</span> forKey:<span class="string">@"age"</span>];</span><br><span class="line">[p setValue:@<span class="number">170</span> forKey:<span class="string">@"_height"</span>];</span><br><span class="line">[p setValue:<span class="string">@"å¥³ç”Ÿ"</span> forKey:<span class="string">@"sex"</span>];</span><br><span class="line">    </span><br><span class="line"><span class="comment">//3.KVCé€šè¿‡å­—å…¸ç»™å¯¹è±¡èµ‹å€¼</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;<span class="string">@"age"</span>:@<span class="number">33</span>, <span class="string">@"name"</span>:<span class="string">@"æå››"</span>, <span class="string">@"bus"</span>:c, <span class="string">@"_height"</span>:<span class="string">@"180"</span>&#125;;</span><br><span class="line">[p setValuesForKeysWithDictionary:dict];</span><br><span class="line">    </span><br><span class="line"><span class="comment">//4.KVCå’Œæ•°ç»„,æ ¹æ®keyPathè·å–æ•°ç»„ä¸­å¯¹è±¡çš„å±æ€§çš„å€¼</span></span><br><span class="line">ZMCar *c1 = [[ZMCar alloc]init];</span><br><span class="line">c1.price =<span class="number">21</span>;</span><br><span class="line">ZMCar *c2 = [[ZMCar alloc]init];</span><br><span class="line">c2.price =<span class="number">22</span>;</span><br><span class="line">ZMCar *c3 = [[ZMCar alloc]init];</span><br><span class="line">c3.price =<span class="number">23</span>;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSArray</span> *arr = @[c1, c2, c3];</span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSArray</span> *carPriceArr = [arr valueForKeyPath:<span class="string">@"price"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, carPriceArr);</span><br></pre></td></tr></table></figure>

<h3 id="KVCçš„ä½œç”¨"><a href="#KVCçš„ä½œç”¨" class="headerlink" title="KVCçš„ä½œç”¨"></a>KVCçš„ä½œç”¨</h3><p>é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨è®¿é—®å™¨æ–¹æ³•è®¿é—®å¯¹è±¡çš„å±æ€§ï¼Œå¦‚ï¼š<code>getter</code>æ–¹æ³• å’Œ <code>setter</code>æ–¹æ³•ã€‚åœ¨<code>Objective-C</code>ä¸­ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®å±æ€§çš„åº•å±‚å®ä¾‹å˜é‡ã€‚è¿™äº›æ–¹å¼è®¿é—®å¯¹è±¡çš„å±æ€§éƒ½å¾ˆç®€å•ï¼Œä½†éœ€è¦è°ƒç”¨ç‰¹å®šäºå±æ€§çš„æ–¹æ³•æˆ–å˜é‡åã€‚éšç€å±æ€§åˆ—è¡¨çš„å¢åŠ æˆ–æ›´æ”¹ï¼Œè®¿é—®è¿™äº›å±æ€§çš„ä»£ç ä¹Ÿå¿…é¡»éšä¹‹å¢åŠ ï¼Œç¼ºä¹çµæ´»æ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œéµå¾ª <code>Key-Value Coding</code> çš„å¯¹è±¡æä¾›äº†ä¸€ä¸ªç®€å•çš„æ¶ˆæ¯ä¼ é€’æ¥å£ï¼Œè¯¥æ¥å£åœ¨å…¶æ‰€æœ‰å±æ€§ä¹‹é—´éƒ½æ˜¯ä¸€è‡´çš„ã€‚</p>
<p><code>Key-Value Coding</code> æ˜¯å…¶ä»–è®¸å¤š<code>Cocoa</code>æŠ€æœ¯çš„åŸºç¡€æ¦‚å¿µï¼Œå¦‚ï¼š<a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177i" target="_blank" rel="noopener">Key-value-observation(KVO)</a>ã€<a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CocoaBindings/CocoaBindings.html#//apple_ref/doc/uid/10000167i" target="_blank" rel="noopener">Cocoa bindings</a>ã€<a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreData/index.html#//apple_ref/doc/uid/TP40001075" target="_blank" rel="noopener">Core Data</a>å’Œ <a href="https://developer.apple.com/library/archive/documentation/AppleScript/Conceptual/AppleScriptX/AppleScriptX.html#//apple_ref/doc/uid/10000156i" target="_blank" rel="noopener">AppleScript-ability</a>ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ<code>KVC</code>è¿˜å¯ä»¥å¸®åŠ©ç®€åŒ–ä»£ç ã€‚</p>
<h2 id="KVCå¯ä»¥æ‰§è¡Œçš„æ“ä½œ"><a href="#KVCå¯ä»¥æ‰§è¡Œçš„æ“ä½œ" class="headerlink" title="KVCå¯ä»¥æ‰§è¡Œçš„æ“ä½œ"></a>KVCå¯ä»¥æ‰§è¡Œçš„æ“ä½œ</h2><p><code>NSObject</code> é‡‡ç”¨äº† <code>NSKeyValueCoding</code> åè®®ï¼Œå¹¶ä¸ºåŸºæœ¬æ–¹æ³•æä¾›äº†é»˜è®¤å®ç°ã€‚è¿™æ ·ç»§æ‰¿è‡ª<code>NSObject</code>çš„å¯¹è±¡ä½¿å…¶ä»–å¯¹è±¡èƒ½å¤Ÿé€šè¿‡ç´§å‡‘çš„æ¶ˆæ¯ä¼ é€’æ¥å£æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li><p>è®¿é—®å¯¹è±¡çš„å±æ€§</p>
</li>
<li><p>æ“ä½œé›†åˆå±æ€§</p>
</li>
<li><p>åœ¨é›†åˆå¯¹è±¡ä¸Šè°ƒç”¨é›†åˆè¿ç®—ç¬¦</p>
</li>
<li><p>è®¿é—®éå¯¹è±¡å±æ€§</p>
</li>
<li><p>é€šè¿‡<code>Key-Path</code>è®¿é—®å±æ€§</p>
</li>
</ul>
<h3 id="KVCè®¿é—®å¯¹è±¡çš„å±æ€§"><a href="#KVCè®¿é—®å¯¹è±¡çš„å±æ€§" class="headerlink" title="KVCè®¿é—®å¯¹è±¡çš„å±æ€§"></a>KVCè®¿é—®å¯¹è±¡çš„å±æ€§</h3><h4 id="ç”¨Key-å’Œ-key-path-æ ‡è¯†å¯¹è±¡çš„å±æ€§"><a href="#ç”¨Key-å’Œ-key-path-æ ‡è¯†å¯¹è±¡çš„å±æ€§" class="headerlink" title="ç”¨Key å’Œ key path æ ‡è¯†å¯¹è±¡çš„å±æ€§"></a>ç”¨<code>Key</code> å’Œ <code>key path</code> æ ‡è¯†å¯¹è±¡çš„å±æ€§</h4><p>é”®(<code>Key</code>)æ˜¯æ ‡è¯†ç‰¹å®šå±æ€§çš„å­—ç¬¦ä¸²ã€‚é€šå¸¸ï¼ŒæŒ‰ç…§çº¦å®šï¼Œè¡¨ç¤ºå±æ€§çš„é”®æ˜¯åœ¨ä»£ç ä¸­æ˜¾ç¤ºçš„å±æ€§æœ¬èº«çš„åç§°ã€‚</p>
<p>é”®è·¯å¾„(<code>key path</code>)æ˜¯ä¸€ç³»åˆ—ç‚¹åˆ†éš”çš„é”®(<code>Key</code>)ï¼Œç”¨äºæŒ‡å®šè¦éå†çš„å¯¹è±¡(éµå¾ª<code>KVC</code>çš„å±‚æ¬¡ç»“æ„å¯¹è±¡)å±æ€§åºåˆ—ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)setValue:(<span class="keyword">nullable</span> <span class="keyword">id</span>)value forKey:(<span class="built_in">NSString</span> *)key;</span><br><span class="line">- (<span class="keyword">void</span>)setValue:(<span class="keyword">nullable</span> <span class="keyword">id</span>)value forKeyPath:(<span class="built_in">NSString</span> *)keyPath;</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨-Key-è®¾ç½®å±æ€§å€¼"><a href="#ä½¿ç”¨-Key-è®¾ç½®å±æ€§å€¼" class="headerlink" title="ä½¿ç”¨ Key è®¾ç½®å±æ€§å€¼"></a>ä½¿ç”¨ Key è®¾ç½®å±æ€§å€¼</h4><ul>
<li><p><code>setValue:forKey:</code> å°†æŒ‡å®š<code>Key</code>ç›¸å¯¹äºæ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡çš„å€¼è®¾ç½®ä¸ºç»™å®šå€¼ã€‚<br>å¦‚æœæŒ‡å®š <code>Key</code> çš„å¯¹åº”äºæ¥æ”¶<code>setter</code>è°ƒç”¨çš„å¯¹è±¡æ‰€ä¸å…·æœ‰çš„å±æ€§ï¼Œåˆ™è¯¥å¯¹è±¡å°†å‘è‡ªèº«å‘é€<code>setValue:forUndefinedKey:</code>æ¶ˆæ¯ã€‚<code>setValue:forUndefinedKey:</code>çš„é»˜è®¤å®ç°å¼•å‘<code>NSUndefinedKeyException</code>å¼‚å¸¸ï¼Œå­ç±»å¯ä»¥é‡å†™æ­¤æ–¹æ³•ä»¥è‡ªå®šä¹‰æ–¹å¼å¤„ç†è¯·æ±‚ã€‚</p>
</li>
<li><p><code>setValue:forKeyPath:</code> åœ¨ç›¸å¯¹äºæ¥æ”¶æ–¹æŒ‡å®š<code>Key Path</code>å¤„çš„è®¾ç½®ç»™å®šå€¼ã€‚<br><code>Key Path</code>åºåˆ—ä¸­ä¸ç¬¦åˆç‰¹å®š<code>Key</code>çš„é”®å€¼ç¼–ç çš„ä»»ä½•å¯¹è±¡éƒ½ä¼šæ”¶åˆ°<code>setValue:forUndefinedKey:</code>æ¶ˆæ¯ã€‚</p>
</li>
<li><p><code>setValuesForKeysWithDictionary:</code> ä½¿ç”¨å­—å…¸<code>Key</code>æ ‡è¯†å±æ€§ï¼Œä½¿ç”¨æŒ‡å®šå­—å…¸ä¸­çš„<code>Value</code>è®¾ç½®æ¥æ”¶æ–¹çš„å±æ€§ã€‚<br>é»˜è®¤å®ç°ä¸ºå­—å…¸çš„æ¯ä¸ª é”®-å€¼å¯¹ è°ƒç”¨<code>setValue:forKey:</code>ï¼Œå¹¶æ ¹æ®éœ€è¦ç”¨<code>nil</code>æ›¿æ¢<code>NSNull</code>å¯¹è±¡ã€‚</p>
</li>
</ul>
<p>åœ¨é»˜è®¤å®ç°ä¸­ï¼Œå½“æ‚¨å°è¯•å°†ä¸€ä¸ª<strong>éå¯¹è±¡å±æ€§</strong>è®¾ç½®ä¸º<code>nil</code>å€¼æ—¶ï¼Œ<code>KVC</code>å¯¹è±¡ä¼šå‘è‡ªå·±å‘é€ä¸€ä¸ª<code>setNilValueForKey:</code>æ¶ˆæ¯ã€‚<code>setNilValueForKey:</code>çš„é»˜è®¤å®ç°ä¼šå¼•å‘ä¸€ä¸ª<code>NSInvalidArgumentException</code>å¼‚å¸¸ï¼Œä½†å¯¹è±¡å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•æ¥ä»£æ›¿é»˜è®¤å€¼æˆ–æ ‡è®°å€¼ï¼Œå¦‚å¤„ç†éå¯¹è±¡å€¼ä¸­æ‰€æè¿°çš„é‚£æ ·ã€‚</p>
<h4 id="ä½¿ç”¨-Key-è·å–å±æ€§çš„å€¼"><a href="#ä½¿ç”¨-Key-è·å–å±æ€§çš„å€¼" class="headerlink" title="ä½¿ç”¨ Key è·å–å±æ€§çš„å€¼"></a>ä½¿ç”¨ Key è·å–å±æ€§çš„å€¼</h4><ul>
<li><p><code>valueForKey:</code> è¿”å›ç”±<code>key</code>å‚æ•°å‘½åçš„å±æ€§çš„å€¼ã€‚<br>å¦‚æœæ— æ³•æ‰¾åˆ°ç”±<code>Key</code>å‘½åçš„å±æ€§ï¼Œåˆ™<code>KVC</code>å¯¹è±¡å°†å‘è‡ªå·±å‘é€<code>valueForUndefinedKey:</code>æ¶ˆæ¯ï¼Œ<code>valueForUndefinedKey:</code>çš„é»˜è®¤å®ç°å¼•å‘äº†ä¸€ä¸ª<code>NSUndefinedKeyException</code>ï¼Œå­ç±»é€šå¸¸é‡å†™æ­¤æ–¹æ³•å¹¶æ›´ä¼˜é›…çš„å¤„ç†è¿™ç§æƒ…å†µã€‚</p>
</li>
<li><p><code>valueForKeyPath:</code> è¿”å›ç›¸å¯¹äºæ¥æ”¶è€…çš„æŒ‡å®š<code>Key Path</code>çš„å€¼ã€‚<br>åœ¨<code>Key Path</code>åºåˆ—ä¸­ä»»ä½•ä¸ç¬¦åˆ<code>KVC</code>çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>valueForKey:</code>çš„é»˜è®¤å®ç°æ— æ³•æ‰¾åˆ°è®¿é—®å™¨æ–¹æ³•ï¼Œè¯¥å¯¹è±¡å‡ä¼šæ¥æ”¶åˆ°<code>valueForUndefinedKey:</code>æ¶ˆæ¯ã€‚</p>
</li>
<li><p><code>dictionaryWithValuesForKeys:</code> è¿”å›ä¸æ¥æ”¶å™¨ç›¸å…³çš„é”®æ•°ç»„çš„å€¼ã€‚<br>è¯¥æ–¹æ³•ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ª<code>Key</code>è°ƒç”¨<code>valueForKey:</code>ã€‚ è¿”å›çš„<code>NSDictionary</code>åŒ…å«æ•°ç»„ä¸­æ‰€æœ‰é”®çš„å€¼ã€‚</p>
</li>
</ul>
<p>å¦‚ä¸‹ä¾‹å­ï¼Œè®¿é—®å¯¹è±¡çš„å±æ€§ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ZMPart</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>)<span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)<span class="built_in">NSArray</span> &lt;<span class="built_in">NSString</span> *&gt;*place;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ZMTool</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)<span class="built_in">NSNumber</span> *objCount;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)ZMPart *part;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)<span class="built_in">NSArray</span> &lt;<span class="built_in">UIColor</span> *&gt; *colors;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)<span class="built_in">NSArray</span> &lt;<span class="built_in">NSNumber</span> *&gt;*days;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[tool setValue:@<span class="number">2</span> forKey:<span class="string">@"objCount"</span>];</span><br><span class="line">[tool setValue:@[[<span class="built_in">UIColor</span> blueColor], [<span class="built_in">UIColor</span> redColor]] forKey:<span class="string">@"colors"</span>];</span><br><span class="line">[tool setValue:[[ZMPart alloc] init] forKey:<span class="string">@"part"</span>];</span><br><span class="line">[tool setValue:<span class="string">@"new_part"</span> forKeyPath:<span class="string">@"part.name"</span>];</span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@, %@, %@"</span>, [tool valueForKey:<span class="string">@"objCount"</span>], tool.colors, [tool valueForKeyPath:<span class="string">@"part.name"</span>]);</span><br><span class="line">    </span><br><span class="line">[tool setValuesForKeysWithDictionary:@&#123;<span class="string">@"objCount"</span>: @<span class="number">12</span>, <span class="string">@"colors"</span>:@[[<span class="built_in">UIColor</span> yellowColor]]&#125;];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, [tool dictionaryWithValuesForKeys:@[<span class="string">@"objCount"</span>, <span class="string">@"colors"</span>]]);</span><br></pre></td></tr></table></figure>

<h3 id="KVCæ“ä½œé›†åˆå±æ€§"><a href="#KVCæ“ä½œé›†åˆå±æ€§" class="headerlink" title="KVCæ“ä½œé›†åˆå±æ€§"></a>KVCæ“ä½œé›†åˆå±æ€§</h3><p>ç¬¦åˆ <code>KVC</code> çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ å…¶åè®®æä¾›çš„æ–¹æ³•æ¥æ“ä½œé›†åˆç±»å‹çš„å±æ€§å†…å®¹ã€‚åè®®æä¾›äº†å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<ul>
<li><p><code>mutableArrayValueForKey:</code> å’Œ <code>mutableArrayValueForKeyPath:</code><br>è¿”å›è¡Œä¸ºç±»ä¼¼äº<code>NSMutableArray</code>å¯¹è±¡çš„<strong>ä»£ç†å¯¹è±¡</strong>ã€‚</p>
</li>
<li><p><code>mutableSetValueForKey:</code> å’Œ <code>mutableSetValueForKeyPath:</code><br>è¿”å›è¡Œä¸ºç±»ä¼¼äº<code>NSMutableSet</code>å¯¹è±¡çš„<strong>ä»£ç†å¯¹è±¡</strong>ã€‚</p>
</li>
<li><p><code>mutableOrderedSetValueForKey:</code> å’Œ <code>mutableOrderedSetValueForKeyPath:</code><br>è¿”å›è¡Œä¸ºç±»ä¼¼äº<code>NSMutableOrderedSet</code>å¯¹è±¡çš„<strong>ä»£ç†å¯¹è±¡</strong>ã€‚</p>
</li>
</ul>
<p>é€šè¿‡å¦‚ä¸‹ä¾‹å­æ¥ç†è§£ä»£ç†å¯¹è±¡ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[tool setValue:@[@<span class="number">1</span>, @<span class="number">2</span>, @<span class="number">3</span>] forKey:<span class="string">@"days"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, [tool valueForKey:<span class="string">@"days"</span>]);   <span class="comment">// æ‰“å°ï¼š[1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œé›†åˆç±»å‹çš„å±æ€§ï¼š</span></span><br><span class="line"><span class="built_in">NSMutableArray</span> *days = [tool mutableArrayValueForKey:<span class="string">@"days"</span>];</span><br><span class="line">[days removeObject:@<span class="number">2</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, [tool valueForKey:<span class="string">@"days"</span>]);   <span class="comment">// æ‰“å°ï¼š[1, 3]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[tool setValue:@[<span class="string">@"åŒ—äº¬"</span>, <span class="string">@"æ²³åŒ—"</span>] forKeyPath:<span class="string">@"part.place"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, [tool valueForKeyPath:<span class="string">@"part.place"</span>]); <span class="comment">// æ‰“å°ï¼š["åŒ—äº¬", "æ²³åŒ—"] </span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSMutableArray</span> *mutPlace = [tool mutableArrayValueForKeyPath:<span class="string">@"part.place"</span>];</span><br><span class="line">[mutPlace addObject:<span class="string">@"æ²³å—"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, [tool valueForKeyPath:<span class="string">@"part.place"</span>]); <span class="comment">// æ‰“å°ï¼š["åŒ—äº¬", "æ²³åŒ—", "æ²³å—"]</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡å¯¹<strong>ä»£ç†å¯¹è±¡</strong>è¿›è¡Œæ“ä½œé›†åˆçš„å†…å®¹ï¼Œåè®®çš„é»˜è®¤å®ç°å°†ç›¸åº”åœ°ä¿®æ”¹åº•å±‚å±æ€§ã€‚è¿™æ¯”<code>valueForKey:</code>è·å–ä¸å¯å˜çš„é›†åˆå¯¹è±¡ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªå†…å®¹å·²ä¿®æ”¹çš„å¯¹è±¡ï¼Œæœ€åä½¿ç”¨<code>setValue:forKey:</code>å­˜å›æ›´æœ‰æ•ˆã€‚</p>
<p>è¿™äº›æ–¹æ³•çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥ç»´æŠ¤é›†åˆå¯¹è±¡ä¸­ä¿å­˜çš„å¯¹è±¡çš„<code>KVO</code>éµä»æ€§ã€‚</p>
<h3 id="ä½¿ç”¨é›†åˆè¿ç®—ç¬¦"><a href="#ä½¿ç”¨é›†åˆè¿ç®—ç¬¦" class="headerlink" title="ä½¿ç”¨é›†åˆè¿ç®—ç¬¦"></a>ä½¿ç”¨é›†åˆè¿ç®—ç¬¦</h3><p>å½“å‘ç¬¦åˆ<code>KVC</code>çš„å¯¹è±¡å‘é€ <code>valueForKeyPath:</code>æ¶ˆæ¯æ—¶ï¼Œå¯ä»¥åœ¨ <code>Key-Path</code> ä¸­åµŒå…¥ <strong>é›†åˆè¿ç®—ç¬¦</strong>ã€‚</p>
<p>é›†åˆè¿ç®—ç¬¦(<code>Collection Operators</code>)æ˜¯å‰é¢å¸¦æœ‰ä¸€ä¸ª<code>@ç¬¦å·</code>ä¸€å°ä¸²å…³é”®å­—ä¸­çš„ä¸€ä¸ªï¼Œå®ƒæŒ‡å®šäº†<code>getter</code>åœ¨è¿”å›æ•°æ®ä¹‹å‰åº”è¯¥æ‰§è¡Œçš„æ“ä½œï¼Œä»¥æŸç§æ–¹å¼å¯¹æ•°æ®è¿›è¡Œæ“ä½œã€‚<code>NSObject</code>é»˜è®¤å®ç°å®ç°äº†æ­¤è¡Œä¸ºã€‚</p>
<p>å½“<code>Key-Path</code>åŒ…å«é›†åˆè¿ç®—ç¬¦æ—¶ï¼Œä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p><img src="media/15731078774706/keypath.jpg" alt="keypath"></p>
<ul>
<li><p><code>Left Key Path</code>ï¼šç§°ä¸ºå·¦é”®è·¯å¾„ï¼Œå®ƒæŒ‡é›†åˆè¿ç®—ç¬¦ä¹‹å‰çš„<code>Key-Path</code>çš„ä»»ä½•éƒ¨åˆ†ï¼ŒæŒ‡ç¤ºç›¸å¯¹äºæ¶ˆæ¯æ¥æ”¶æ–¹è¦æ“ä½œçš„é›†åˆã€‚å¦‚æœå°†æ¶ˆæ¯ç›´æ¥å‘é€ç»™ä¸€ä¸ªé›†åˆå¯¹è±¡ï¼Œæ¯”å¦‚<code>NSArray</code>å®ä¾‹ï¼Œåˆ™å¯èƒ½ä¼šçœç•¥å·¦é”®è·¯å¾„ã€‚</p>
</li>
<li><p><code>Right Key Path</code>ï¼šç§°ä¸ºå³é”®è·¯å¾„ï¼Œå®ƒæŒ‡é›†åˆè¿ç®—ç¬¦åé¢çš„<code>Key-Path</code>éƒ¨åˆ†ï¼ŒæŒ‡å®šäº†è¯¥è¿ç®—ç¬¦åº”å¤„ç†çš„é›†åˆä¸­çš„å±æ€§ã€‚é™¤<code>@count</code>ä¹‹å¤–çš„æ‰€æœ‰é›†åˆè¿ç®—ç¬¦éƒ½éœ€è¦ä¸€ä¸ªæ­£ç¡®çš„<code>Key-Path</code>ã€‚</p>
</li>
</ul>
<p><code>Collection Operators</code>çš„ä¸‰ç§åŸºæœ¬è¡Œä¸ºç±»å‹ï¼š</p>
<ol>
<li><code>Aggregation Operators</code>(èšåˆè¿ç®—ç¬¦)ï¼Œä»¥æŸç§æ–¹å¼åˆå¹¶é›†åˆå¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªé€šå¸¸ä¸å³é”®è·¯å¾„ä¸­æŒ‡å®šçš„å±æ€§çš„æ•°æ®ç±»å‹åŒ¹é…çš„å•ä¸ªå¯¹è±¡ã€‚<code>@count</code>è¿ç®—ç¬¦ç¬¦æ˜¯ä¸ªä¾‹å¤–ï¼Œå®ƒä¸æ¥å—å³é”®è·¯å¾„ï¼Œå¹¶ä¸”æ€»æ˜¯è¿”å›ä¸€ä¸ª<code>NSNumber</code>å®ä¾‹ã€‚</li>
<li><code>Array Operators</code>(æ•°ç»„è¿ç®—ç¬¦)ï¼Œè¿”å›ä¸€ä¸ªNSArrayå®ä¾‹ï¼Œè¯¥å®ä¾‹åŒ…å«å‘½åé›†åˆä¸­åŒ…å«çš„æŸäº›å¯¹è±¡å­é›†ã€‚</li>
<li><code>Nesting Operators</code>(åµŒå¥—è¿ç®—ç¬¦)ï¼Œåœ¨åŒ…å«å…¶ä»–é›†åˆçš„é›†åˆä¸Šå·¥ä½œï¼Œå¹¶æ ¹æ®è¿ç®—ç¬¦è¿”å›<code>NSArray</code>æˆ–<code>NSSet</code>å®ä¾‹ï¼Œè¯¥å®ä¾‹ä»¥æŸç§æ–¹å¼ç»„åˆåµŒå¥—é›†åˆçš„å¯¹è±¡ã€‚</li>
</ol>
<p>ä¸‹é¢ä¾‹å­å‡ä½¿ç”¨ä»¥ä¸‹å¯¹è±¡è¿›è¡Œï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Person</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>)<span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)<span class="built_in">NSNumber</span> *age;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)<span class="built_in">NSDate</span> *birthday;</span><br><span class="line"></span><br><span class="line">+ (<span class="keyword">instancetype</span>)personWithDict:(<span class="built_in">NSDictionary</span> *)dict;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Person</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithDict:(<span class="built_in">NSDictionary</span> *)dict &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">        [<span class="keyword">self</span> setValuesForKeysWithDictionary:dict];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (<span class="keyword">instancetype</span>)personWithDict:(<span class="built_in">NSDictionary</span> *)dict &#123;</span><br><span class="line">    <span class="keyword">return</span> [[<span class="keyword">self</span> alloc] initWithDict:dict];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setValue:(<span class="keyword">id</span>)value forUndefinedKey:(<span class="built_in">NSString</span> *)key &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­æœªæ‰¾åˆ°key: %@"</span>, key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<h4 id="Aggregation-Operators"><a href="#Aggregation-Operators" class="headerlink" title="Aggregation Operators"></a>Aggregation Operators</h4><p><strong>èšåˆè¿ç®—ç¬¦</strong> ç”¨äºå¤„ç†æ•°ç»„æˆ–å±æ€§é›†ï¼Œç”Ÿæˆåæ˜ é›†åˆæŸäº›æ–¹é¢çš„å•ä¸ªå€¼ã€‚</p>
<ul>
<li><p><code>@avg</code>è¿ç®—ç¬¦ï¼Œ<code>valueForKeyPath:</code>è¯»å–é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„å³é”®è·¯å¾„æŒ‡å®šçš„å±æ€§ï¼Œå°†å…¶è½¬æ¢ä¸ºåŒç²¾åº¦å€¼(ç”¨0æ›¿æ¢nilå€¼)ï¼Œå¹¶è®¡ç®—è¿™äº›å€¼çš„ç®—æœ¯å¹³å‡å€¼ã€‚ç„¶åè¿”å›å­˜å‚¨åœ¨<code>NSNumber</code>å®ä¾‹ä¸­çš„ç»“æœã€‚</p>
</li>
<li><p><code>@count</code>è¿ç®—ç¬¦ï¼Œ<code>valueForKeyPath:</code>è¿”å›<code>NSNumber</code>å®ä¾‹ä¸­é›†åˆä¸­çš„å¯¹è±¡æ•°é‡ã€‚å¦‚æœå­˜åœ¨<code>right key path</code>å°†è¢«å¿½ç•¥ã€‚</p>
</li>
<li><p><code>@max</code>è¿ç®—ç¬¦ï¼Œ<code>valueForKeyPath:</code>åœ¨ç”±å³é”®è·¯å¾„å‘½åçš„é›†åˆé¡¹ä¸­æœç´¢å¹¶è¿”å›æœ€å¤§çš„é¡¹ã€‚æœç´¢ä½¿ç”¨<code>Foundation</code>ä¸­çš„<code>compare:</code>æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œå› æ­¤ï¼Œå³é”®è·¯å¾„æ‰€æŒ‡ç¤ºçš„å±æ€§å¿…é¡»åŒ…å«å¯¹è¯¥æ–¹æ³•æœ‰æ„ä¹‰å“åº”çš„å¯¹è±¡ã€‚</p>
</li>
<li><p><code>@min</code>è¿ç®—ç¬¦ï¼Œä¸<code>@max</code>è¿ç®—ç¬¦ç›¸åã€‚</p>
</li>
<li><p><code>@sum</code>è¿ç®—ç¬¦ï¼Œ<code>valueForKeyPath:</code>è¯»å–ç”±å³é”®è·¯å¾„ä¸ºé›†åˆçš„æ¯ä¸ªå…ƒç´ æŒ‡å®šçš„å±æ€§ï¼Œå°†å…¶è½¬æ¢ä¸º<code>double</code>ï¼ˆç”¨0ä»£æ›¿<code>nil</code>å€¼ï¼‰ï¼Œå¹¶è®¡ç®—è¿™äº›å€¼çš„æ€»å’Œã€‚å°†ç»“æœè¿”å›å­˜å‚¨åœ¨<code>NSNumber</code>å®ä¾‹ä¸­ã€‚</p>
</li>
</ul>
<p>åŸºæœ¬ä½¿ç”¨å¦‚ä¸‹ä¾‹å­ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.peoples = @[[Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"å¼ ä¸‰"</span>, <span class="string">@"age"</span>:@<span class="number">18</span>, <span class="string">@"birthday"</span>:<span class="string">@"2001-02-22"</span>&#125;],</span><br><span class="line">                 [Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"æå››"</span>, <span class="string">@"age"</span>:@<span class="number">22</span>, <span class="string">@"birthday"</span>:<span class="string">@"2001-01-23"</span>&#125;],</span><br><span class="line">                 [Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"æå››"</span>, <span class="string">@"age"</span>:@<span class="number">22</span>, <span class="string">@"birthday"</span>:<span class="string">@"2001-01-23"</span>&#125;],</span><br><span class="line">                 [Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"èµµå…­"</span>, <span class="string">@"age"</span>:@<span class="number">19</span>, <span class="string">@"birthday"</span>:<span class="string">@"1998-03-23"</span>&#125;]</span><br><span class="line">                ];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSNumber</span> *average = [<span class="keyword">self</span>.peoples valueForKeyPath:<span class="string">@"@avg.age"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, average);  <span class="comment">// æ‰“å°ï¼š20.25</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSNumber</span> *number = [<span class="keyword">self</span>.peoples valueForKeyPath:<span class="string">@"@count"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, number);  <span class="comment">// æ‰“å°ï¼š4</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSDate</span> *max = [<span class="keyword">self</span>.peoples valueForKeyPath:<span class="string">@"@max.birthday"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, max);   <span class="comment">// æ‰“å°ï¼š 2001-02-22</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSDate</span> *min = [<span class="keyword">self</span>.peoples valueForKeyPath:<span class="string">@"@min.birthday"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, min);   <span class="comment">// æ‰“å°ï¼š 1998-03-23</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSNumber</span> *sum = [<span class="keyword">self</span>.peoples valueForKeyPath:<span class="string">@"@sum.age"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, sum);  <span class="comment">// æ‰“å°ï¼š81</span></span><br></pre></td></tr></table></figure>

<h4 id="Array-Operators"><a href="#Array-Operators" class="headerlink" title="Array Operators"></a>Array Operators</h4><p><strong>æ•°ç»„è¿ç®—ç¬¦</strong> ä½¿<code>valueForKeyPath:</code>è¿”å›ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œè¯¥å¯¹è±¡æ•°ç»„ä¸å³é”®è·¯å¾„æŒ‡ç¤ºçš„ä¸€ç»„ç‰¹å®šå¯¹è±¡ç›¸å¯¹åº”ã€‚</p>
<blockquote>
<p>å¦‚æœä½¿ç”¨æ•°ç»„è¿ç®—ç¬¦æ—¶æœ‰ä»»ä½•å­å¯¹è±¡ä¸º<code>nil</code>ï¼Œåˆ™<code>valueForKeyPath:</code>æ–¹æ³•å°†å¼•å‘å¼‚å¸¸ã€‚</p>
</blockquote>
<ul>
<li><p><code>@distinctUnionOfObjects</code>è¿ç®—ç¬¦ï¼Œ<code>valueForKeyPath:</code>åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«é›†åˆä¸­ä¸ç”±å³é”®è·¯å¾„æŒ‡å®šçš„å±æ€§ç›¸å¯¹åº”çš„ä¸é‡å¤å¯¹è±¡ã€‚</p>
</li>
<li><p><code>@unionOfObjects</code>è¿ç®—ç¬¦ï¼Œä¸<code>@distinctUnionOfObjects</code>ç±»ä¼¼ï¼Œä½†æ˜¯è¿”å›çš„æ•°ç»„æ²¡æœ‰åˆ é™¤é‡å¤çš„å¯¹è±¡ã€‚</p>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *distinct = [<span class="keyword">self</span>.peoples valueForKeyPath:<span class="string">@"@distinctUnionOfObjects.name"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"å»æ‰é‡å¤ï¼š%@"</span>, distinct);  <span class="comment">// æ‰“å°ï¼šå»æ‰é‡å¤ï¼š["èµµå…­", "å¼ ä¸‰", "æå››"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSArray</span> *unionNames = [<span class="keyword">self</span>.peoples valueForKeyPath:<span class="string">@"@unionOfObjects.name"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"è·å–æ‰€æœ‰ï¼š%@"</span>, unionNames);  <span class="comment">// æ‰“å°ï¼šè·å–æ‰€æœ‰ï¼š["å¼ ä¸‰", "æå››", "æå››", "èµµå…­"]</span></span><br></pre></td></tr></table></figure>

<h4 id="Nesting-Operators"><a href="#Nesting-Operators" class="headerlink" title="Nesting Operators"></a>Nesting Operators</h4><p><strong>åµŒå¥—è¿ç®—ç¬¦</strong> å¯¹åµŒå¥—çš„é›†åˆè¿›è¡Œæ“ä½œï¼Œå…¶ä¸­é›†åˆæœ¬èº«çš„æ¯ä¸ªæ¡ç›®éƒ½åŒ…å«ä¸€ä¸ªé›†åˆã€‚</p>
<blockquote>
<p>ä½¿ç”¨åµŒå¥—è¿ç®—ç¬¦æ—¶ï¼Œå¦‚æœä»»ä½•å¶å­å¯¹è±¡ä¸º<code>nil</code>ï¼Œåˆ™ <code>valueForKeyPath:</code> æ–¹æ³•å°†å¼•å‘å¼‚å¸¸ã€‚</p>
</blockquote>
<ul>
<li><p><code>@distinctUnionOfArrays</code>è¿ç®—ç¬¦ï¼Œ<code>valueForKeyPath:</code>åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«ä¸å³é”®è·¯å¾„æŒ‡å®šçš„å±æ€§ç›¸å¯¹åº”çš„æ‰€æœ‰é›†åˆçš„ç»„åˆçš„ä¸é‡å¤çš„å¯¹è±¡ã€‚</p>
</li>
<li><p><code>@unionOfArrays</code>è¿ç®—ç¬¦ï¼Œä¸<code>@distinctUnionOfArrays</code> è¿ç®—ç¬¦ç±»ä¼¼ï¼Œä½†ä¸ä¼šåˆ é™¤é‡å¤çš„å¯¹è±¡ã€‚</p>
</li>
<li><p><code>@distinctUnionOfSets</code>è¿ç®—ç¬¦ï¼Œ<code>valueForKeyPath:</code>åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª<code>NSSet</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«ä¸å³é”®è·¯å¾„æŒ‡å®šçš„å±æ€§ç›¸å¯¹åº”çš„æ‰€æœ‰é›†åˆçš„ç»„åˆçš„ä¸é‡å¤çš„å¯¹è±¡ã€‚ä½†æ˜¯å®ƒè¦æ±‚æ“ä½œçš„æ˜¯çš„<code>NSSet</code>ç±»å‹çš„å®ä¾‹ã€‚</p>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.boy = @[[Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"å¼ ä¸‰"</span>, <span class="string">@"age"</span>:@<span class="number">18</span>, <span class="string">@"birthday"</span>:<span class="string">@"2001-02-22"</span>&#125;],</span><br><span class="line">              [Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"æå››"</span>, <span class="string">@"age"</span>:@<span class="number">22</span>, <span class="string">@"birthday"</span>:<span class="string">@"2001-01-23"</span>&#125;],</span><br><span class="line">              [Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"æå››"</span>, <span class="string">@"age"</span>:@<span class="number">22</span>, <span class="string">@"birthday"</span>:<span class="string">@"2001-01-23"</span>&#125;],</span><br><span class="line">              [Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"èµµå…­"</span>, <span class="string">@"age"</span>:@<span class="number">19</span>, <span class="string">@"birthday"</span>:<span class="string">@"1998-03-23"</span>&#125;]</span><br><span class="line">            ];</span><br><span class="line">    </span><br><span class="line"><span class="keyword">self</span>.girl = @[[Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"å°çº¢"</span>, <span class="string">@"age"</span>:@<span class="number">18</span>, <span class="string">@"birthday"</span>:<span class="string">@"2001-02-22"</span>&#125;],</span><br><span class="line">               [Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"å°çº¢"</span>, <span class="string">@"age"</span>:@<span class="number">22</span>, <span class="string">@"birthday"</span>:<span class="string">@"2001-01-23"</span>&#125;],</span><br><span class="line">               [Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"å°ç¿ "</span>, <span class="string">@"age"</span>:@<span class="number">22</span>, <span class="string">@"birthday"</span>:<span class="string">@"2001-01-23"</span>&#125;],</span><br><span class="line">               [Person personWithDict:@&#123;<span class="string">@"name"</span>:<span class="string">@"å°ä¸¹"</span>, <span class="string">@"age"</span>:@<span class="number">19</span>, <span class="string">@"birthday"</span>:<span class="string">@"1998-03-23"</span>&#125;]</span><br><span class="line">            ];</span><br></pre></td></tr></table></figure>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *somePeople = @[<span class="keyword">self</span>.boy, <span class="keyword">self</span>.girl];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSArray</span> *distinctArr = [somePeople valueForKeyPath:<span class="string">@"@distinctUnionOfArrays.birthday"</span>];</span><br><span class="line"><span class="comment">// æ‰“å°ï¼šå»æ‰nä¸ªæ•°ç»„ä¸­é‡å¤ï¼š[1998-03-23, 2001-01-23, 2001-02-22]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"å»æ‰nä¸ªæ•°ç»„ä¸­é‡å¤ï¼š%@"</span>, distinctArr);</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSArray</span> *unionArr = [somePeople valueForKeyPath:<span class="string">@"@unionOfArrays.birthday"</span>];</span><br><span class="line"><span class="comment">// æ‰“å°ï¼šè·å–nä¸ªæ•°ç»„ä¸­æ‰€æœ‰ï¼š[2001-02-22, 2001-01-23, 2001-01-23, 1998-03-23, 2001-02-22, 2001-01-23, 2001-01-23,1998-03-23]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"è·å–nä¸ªæ•°ç»„ä¸­æ‰€æœ‰ï¼š%@"</span>, unionArr);</span><br></pre></td></tr></table></figure>


<h3 id="è®¿é—®éå¯¹è±¡å±æ€§"><a href="#è®¿é—®éå¯¹è±¡å±æ€§" class="headerlink" title="è®¿é—®éå¯¹è±¡å±æ€§"></a>è®¿é—®éå¯¹è±¡å±æ€§</h3><p><code>NSObject</code>éµå®ˆ<code>KVC</code>åè®®çš„æ–¹æ³•é»˜è®¤å®ç°å¯ä»¥åŒæ—¶å¤„ç†å¯¹è±¡(<code>object</code>)å’Œéå¯¹è±¡(<code>non-object</code>)å±æ€§ã€‚é»˜è®¤å®ç°åœ¨ å¯¹è±¡å‚æ•° æˆ– è¿”å›å€¼ ä¸ éå¯¹è±¡å±æ€§ ä¹‹é—´è‡ªåŠ¨è½¬æ¢ã€‚</p>
<p><code>non-object properties</code>åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯åŸºæœ¬æ•°æ®ç±»å‹(<code>intã€floatã€Bool...</code>)ä¹Ÿå°±æ˜¯æ‰€è°“çš„<strong>æ ‡é‡</strong>(<code>scalar</code>)ï¼Œä¸€ç±»æ˜¯<strong>ç»“æ„ä½“</strong>(<code>struct</code>)ã€‚</p>
<ul>
<li><p>å½“ä½¿ç”¨<code>KVC</code>åè®®ä¸­çš„ä¸€ä¸ªå–å€¼æ–¹æ³•(å¦‚ï¼š<code>valueForKey:</code>)æ—¶ï¼Œå¦‚æœè¿”å›å€¼ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>getter</code>ä½¿ç”¨è¿™ä¸ªå€¼æ¥åˆå§‹åŒ–ä¸€ä¸ª<code>NSNumber</code>å¯¹è±¡(ç”¨äºæ ‡é‡)æˆ–<code>NSValue</code>å¯¹è±¡(ç”¨äºç»“æ„ä½“)ï¼Œç„¶åè¿”å›è¯¥å€¼ã€‚</p>
</li>
<li><p>åœ¨ä½¿ç”¨<code>setValue:forKey:</code>ä¹‹ç±»çš„è®¾ç½®å™¨ï¼Œç»™å®šç‰¹å®šé”®çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ•°æ®ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆ<code>setter</code>é¦–å…ˆå‘ä¼ å…¥çš„<code>Value</code>å¯¹è±¡å‘é€é€‚å½“çš„<code>&lt;type&gt;Value</code>æ¶ˆæ¯ï¼Œä»¥æå–åº•å±‚æ•°æ®ï¼Œå¹¶å°†å…¶å­˜å‚¨èµ·æ¥ã€‚</p>
</li>
<li><p>å¯¹éå¯¹è±¡å±æ€§ä½¿ç”¨<code>nil</code>å€¼è°ƒç”¨ä¸€ä¸ª<code>KVC</code>åè®®è®¾ç½®å™¨æ—¶ï¼Œå®ƒä¼šå‘æ¥æ”¶<code>setter</code>è°ƒç”¨çš„å¯¹è±¡å‘é€ä¸€ä¸ª<code>setNilValueForKey:</code>æ¶ˆæ¯ã€‚è¿™ä¸ªæ–¹æ³•çš„é»˜è®¤å®ç°ä¼šå¼•å‘ä¸€ä¸ª<code>NSInvalidArgumentException</code>å¼‚å¸¸ï¼Œä¸€èˆ¬å­ç±»å¯èƒ½ä¼šè¦†ç›–è¿™ä¸ªè¡Œä¸ºã€‚</p>
</li>
</ul>
<p>ä¸‹é¢ä¾‹å­æ¼”ç¤ºäº†åˆ©ç”¨<code>KVC</code>å¯¹<code>non-object properties</code>(éå¯¹è±¡å±æ€§)çš„è®¿é—®ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="keyword">float</span> x, y, z;</span><br><span class="line">&#125; ThreePoint;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyScalar</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>)<span class="keyword">float</span> num;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>)<span class="built_in">BOOL</span> result;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>)<span class="built_in">CGPoint</span> point;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>)<span class="built_in">NSNumber</span> *count;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>)<span class="keyword">int</span> total;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>)ThreePoint threePt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line">MyScalar *scalar = [[MyScalar alloc] init];</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>NSNumber</code>å®ä¾‹åŒ…è£…çš„æ ‡é‡ç±»å‹ï¼Œ<code>NSValue</code>å°è£…ç»“æ„ä½“ç±»å‹ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[scalar setValue:[<span class="built_in">NSNumber</span> numberWithFloat:<span class="number">0.25</span>] forKey:<span class="string">@"num"</span>];</span><br><span class="line"><span class="built_in">NSNumber</span> *num = [scalar valueForKey:<span class="string">@"num"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%0.2f, %@"</span>, num.floatValue, [num <span class="keyword">class</span>]);   <span class="comment">// 0.25, __NSCFNumber</span></span><br><span class="line">    </span><br><span class="line">[scalar setValue:[<span class="built_in">NSNumber</span> numberWithBool:<span class="literal">false</span>] forKey:<span class="string">@"result"</span>];</span><br><span class="line"><span class="built_in">NSNumber</span> *result = [scalar valueForKey:<span class="string">@"result"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%d, %@"</span>, result.boolValue, [result <span class="keyword">class</span>]);  <span class="comment">// 0, __NSCFBoolean</span></span><br><span class="line">    </span><br><span class="line">[scalar setValue:[<span class="built_in">NSValue</span> valueWithCGPoint:<span class="built_in">CGPointMake</span>(<span class="number">50.0</span>, <span class="number">50.0</span>)] forKey:<span class="string">@"point"</span>];</span><br><span class="line"><span class="built_in">NSValue</span> *point = [scalar valueForKey:<span class="string">@"point"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@, %@"</span>, <span class="built_in">NSStringFromCGPoint</span>(point.CGPointValue), [point <span class="keyword">class</span>]);   <span class="comment">// &#123;50, 50&#125;, NSConcreteValue</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡<code>KVC</code>æŠŠéå¯¹è±¡å±æ€§è®¾ç½®ä¸º<code>nil</code>ï¼Œä¼šå‘<code>KVC</code>å¯¹è±¡å‘é€<code>setNilValueForKey:</code>æ¶ˆæ¯ï¼Œå¹¶æŠ›å‡ºå¼‚å¸¸ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[scalar setValue:<span class="literal">nil</span> forKey:<span class="string">@"count"</span>];</span><br><span class="line"><span class="built_in">NSNumber</span> *count = [scalar valueForKey:<span class="string">@"count"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"ğŸ˜„ %@"</span>, count);     <span class="comment">// ğŸ˜„ (null)</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// [scalar setValue:nil forKey:@"total"];  // æŠ›å¼‚å¸¸Terminating app due to uncaught exception 'NSInvalidArgumentException'</span></span><br><span class="line"><span class="built_in">NSNumber</span> *total = [scalar valueForKey:<span class="string">@"total"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"ğŸ˜­ %@"</span>, total);     <span class="comment">// ğŸ˜­ 0</span></span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨<code>KVC</code>è®¿é—®è‡ªå®šä¹‰<code>struct</code>ç±»å‹çš„å±æ€§ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ThreePoint three = &#123;<span class="number">1.2</span>, <span class="number">2.2</span>, <span class="number">2.3</span>&#125;;</span><br><span class="line"><span class="built_in">NSValue</span> *value = [<span class="built_in">NSValue</span> valueWithBytes:&amp;three objCType:<span class="keyword">@encode</span>(ThreePoint)];</span><br><span class="line">[scalar setValue:value forKey:<span class="string">@"threePt"</span>];</span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSValue</span> *threePt = [scalar valueForKey:<span class="string">@"threePt"</span>];</span><br><span class="line">ThreePoint getThree;</span><br><span class="line">[threePt getValue:&amp;getThree];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%0.2f, %0.2f, %0.2f, %@"</span>, getThree.x, getThree.y, getThree.z, [threePt <span class="keyword">class</span>]); <span class="comment">// 1.20, 2.20, 2.30, NSConcreteValue</span></span><br></pre></td></tr></table></figure>

<h3 id="éªŒè¯å±æ€§"><a href="#éªŒè¯å±æ€§" class="headerlink" title="éªŒè¯å±æ€§"></a>éªŒè¯å±æ€§</h3><p><code>KVC</code>çš„åè®®ä¸­å®šä¹‰äº†æ”¯æŒå±æ€§éªŒè¯çš„æ–¹æ³•ï¼Œå³å¯¹å±æ€§å€¼çš„åˆæ³•æ€§è¿›è¡Œæ ¡éªŒï¼Œé€šè¿‡å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•å®ç°çš„ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)validateValue:(<span class="keyword">inout</span> <span class="keyword">id</span>  _Nullable __autoreleasing *)ioValue</span><br><span class="line">               forKey:(<span class="built_in">NSString</span> *)inKey</span><br><span class="line">                error:(<span class="keyword">out</span> <span class="built_in">NSError</span> *__autoreleasing  _Nullable *)outError</span><br><span class="line">                </span><br><span class="line">- (<span class="built_in">BOOL</span>)validateValue:(<span class="keyword">inout</span> <span class="keyword">id</span>  _Nullable __autoreleasing *)ioValue</span><br><span class="line">           forKeyPath:(<span class="built_in">NSString</span> *)inKeyPath</span><br><span class="line">                error:(<span class="keyword">out</span> <span class="built_in">NSError</span> *__autoreleasing  _Nullable *)outError</span><br></pre></td></tr></table></figure>

<p>å½“ä½ è°ƒç”¨ä¸Šé¢çš„éªŒè¯æ–¹æ³•æ—¶ï¼Œ<code>KVO</code>çš„é»˜è®¤å®ç°å°†åœ¨æ¥æ”¶éªŒè¯æ¶ˆæ¯çš„å¯¹è±¡(æˆ–<code>keyPath</code>ä¸­æœ€åçš„å¯¹è±¡)ä¸­æœç´¢ä¸€ç§æ–¹æ³•ï¼Œå…¶æ–¹æ³•åä¸<code>validate&lt;Key&gt;:error:</code>æ¨¡å¼åŒ¹é…ã€‚</p>
<ul>
<li>å¦‚æœå¯¹è±¡æ²¡æœ‰è¿™æ ·çš„æ–¹æ³•ï¼Œåˆ™é»˜è®¤éªŒè¯æˆåŠŸï¼Œè¿”å›<code>YES</code>ã€‚</li>
<li>å½“ç‰¹å®šäºå±æ€§çš„éªŒè¯æ–¹æ³•(<code>validate&lt;Key&gt;:error:</code>)å­˜åœ¨æ—¶ï¼Œé»˜è®¤å®ç°å°†è¿”å›è°ƒç”¨è¯¥æ–¹æ³•çš„ç»“æœã€‚</li>
</ul>
<p>ç”±äº<code>validate&lt;Key&gt;:error:</code>æ–¹æ³•é€šè¿‡å¼•ç”¨æ¥æ”¶å€¼(<code>value</code>)å’Œé”™è¯¯å‚æ•°(<code>error</code>)ï¼Œå› æ­¤éªŒè¯æœ‰ä¸‰ç§å¯èƒ½çš„ç»“æœï¼š</p>
<ul>
<li>éªŒè¯æ–¹æ³•è®¤ä¸º<code>value</code>æœ‰æ•ˆï¼Œå¹¶è¿”å›<code>YES</code>ï¼Œè€Œä¸æ”¹å˜<code>value</code>æˆ–<code>error</code>ã€‚</li>
<li>éªŒè¯æ–¹æ³•è®¤ä¸º<code>value</code>æ— æ•ˆï¼Œä½†å¹¶ä¸ä¿®æ”¹å®ƒï¼Œè¿”å›<code>NO</code>ï¼Œå¹¶å°†<code>error</code>è®¾ç½®ä¸º<code>NSError</code>å¯¹è±¡ã€‚</li>
<li>éªŒè¯æ–¹æ³•è®¤ä¸º<code>value</code>æ— æ•ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æœ‰æ•ˆå¯¹è±¡æ›¿æ¢<code>value</code>ã€‚æ–¹æ³•è¿”å›<code>YES</code>ï¼ŒåŒæ—¶ä¿æŒerrorå¯¹è±¡ä¸å˜ã€‚</li>
</ul>
<p>å¦‚ä¸‹é¢ä¾‹å­ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyValidate</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>)<span class="built_in">NSString</span> *name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MyValidate</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯å±æ€§ name  çš„å€¼æ˜¯å¦ä¸º `admin`</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)validateName:(<span class="keyword">inout</span> <span class="keyword">id</span> *)value error:(<span class="keyword">out</span> <span class="built_in">NSError</span> *__autoreleasing  _Nullable *)outError &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSString</span> *name = *value;</span><br><span class="line">    <span class="built_in">BOOL</span> res = <span class="literal">NO</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ([name isEqualToString:<span class="string">@"admin"</span>]) &#123;</span><br><span class="line">        res = <span class="literal">YES</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        NSError *err = [[NSError alloc] initWithDomain:NSCocoaErrorDomain code:100 userInfo:@&#123;NSLocalizedDescriptionKey:@"æè¿°ï¼šè®¾ç½®nameå€¼ä¸ç¬¦åˆè¦æ±‚",</span></span><br><span class="line"><span class="comment">//                       NSLocalizedFailureReasonErrorKey:@"åŸå› ï¼šnameçš„å€¼å¿…é¡»ä¸ºadmin",</span></span><br><span class="line"><span class="comment">//                       NSLocalizedRecoverySuggestionErrorKey:@"å»ºè®®ï¼šä¿®æ”¹nameçš„å€¼"&#125;];</span></span><br><span class="line"><span class="comment">//        res = NO;</span></span><br><span class="line"><span class="comment">//        *outError = err;</span></span><br><span class="line"></span><br><span class="line">        *value = <span class="string">@"admin"</span>;</span><br><span class="line">        res = <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MyValidate *obj = [[MyValidate alloc] init];</span><br><span class="line"><span class="built_in">NSError</span> *error;</span><br><span class="line"><span class="built_in">NSString</span> *value = <span class="string">@"tom"</span>;</span><br><span class="line"><span class="built_in">BOOL</span> res = [obj validateValue:&amp;value forKey:<span class="string">@"name"</span> error:&amp;error];</span><br><span class="line"><span class="keyword">if</span> (res) &#123;</span><br><span class="line">    [obj setValue:value forKey:<span class="string">@"name"</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%d, %@, %@, %@"</span>, res, value, error, [obj valueForKey:<span class="string">@"name"</span>]);  <span class="comment">// 1, admin, (null), admin</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>é€šå¸¸ï¼Œ<code>KVC</code>çš„é»˜è®¤å®ç°éƒ½æ²¡æœ‰å®šä¹‰ä»»ä½•è‡ªåŠ¨æ‰§è¡ŒéªŒè¯çš„æœºåˆ¶ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨åˆé€‚çš„åœ°æ–¹æä¾›éªŒè¯æ–¹æ³•ã€‚</p>
<p>é€šå¸¸ï¼Œä»…åœ¨<code>Objective-C</code>ä¸­ä½¿ç”¨æ­¤å¤„æè¿°çš„éªŒè¯åœ¨<code>Swift</code>ä¸­ï¼Œå±æ€§éªŒè¯æ›´ä¹ æƒ¯åœ°é€šè¿‡ä¾èµ–ç¼–è¯‘å™¨å¯¹ <code>Optional</code> å’Œ å¼ºç±»å‹ æ£€æŸ¥çš„æ”¯æŒæ¥å¤„ç†ï¼Œè€Œä½¿ç”¨<code>willSet</code> å’Œ <code>didSet</code>æ¥æµ‹è¯•è¿è¡Œæ—¶APIçš„çº¦å®šã€‚</p>
</blockquote>
<h3 id="è®¿é—®æœç´¢æ¨¡å¼"><a href="#è®¿é—®æœç´¢æ¨¡å¼" class="headerlink" title="è®¿é—®æœç´¢æ¨¡å¼"></a>è®¿é—®æœç´¢æ¨¡å¼</h3><p><code>NSObject</code>æä¾›çš„<code>NSKeyValueCoding</code>åè®®çš„é»˜è®¤å®ç°ï¼Œä½¿ç”¨ä¸€ç»„æ˜ç¡®å®šä¹‰çš„è§„åˆ™å°†åŸºäºé”®(<code>Key</code>)çš„è®¿é—®å™¨è°ƒç”¨æ˜ å°„åˆ°å¯¹è±¡çš„åº•å±‚å±æ€§ã€‚è¿™äº›åè®®æ–¹æ³•ä½¿ç”¨ä¸€ä¸ªé”®(<code>Key</code>)å‚æ•°åœ¨è‡ªå·±çš„å¯¹è±¡å®ä¾‹ä¸­æœç´¢è®¿é—®å™¨ã€å®ä¾‹å˜é‡ å’Œ éµå¾ªç‰¹å®šå‘½åçº¦å®šçš„ç›¸å…³æ–¹æ³•ã€‚</p>
<p>å°½ç®¡æ‚¨å¾ˆå°‘ä¿®æ”¹è¿™ç§é»˜è®¤æœç´¢ï¼Œä½†æ˜¯ç†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„è¿˜æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ï¼Œè¿™æœ‰åŠ©äºè·Ÿè¸ª<code>KVC</code>å¯¹è±¡çš„è¡Œä¸ºï¼Œä¹Ÿæœ‰åŠ©äºä½¿ä½ è‡ªå·±çš„å¯¹è±¡å…¼å®¹ã€‚</p>
<p>é€šè¿‡<code>KVC</code>é—´æ¥è®¿é—®å¯¹è±¡çš„å±æ€§ï¼Œå…¶å–å€¼(<code>getter</code>)å’Œèµ‹å€¼(<code>setter</code>)çš„å·¥ä½œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<h4 id="åŸºæœ¬çš„-Getter-æœç´¢æ¨¡å¼"><a href="#åŸºæœ¬çš„-Getter-æœç´¢æ¨¡å¼" class="headerlink" title="åŸºæœ¬çš„ Getter æœç´¢æ¨¡å¼"></a>åŸºæœ¬çš„ Getter æœç´¢æ¨¡å¼</h4><p>æ‰§è¡Œ<code>valueForKey:</code>æ—¶ï¼Œåœ¨è¯¥æ–¹æ³•è°ƒç”¨ç±»å®ä¾‹ä¸­é»˜è®¤è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š<br>1ã€ æŒ‰é¡ºåºåœ¨å®ä¾‹ä¸­æœç´¢ç¬¬ä¸€ä¸ªåä¸º<code>get&lt;Key&gt;</code>ã€<code>&lt;Key&gt;</code>ã€<code>is&lt;Key&gt;</code>æˆ–<code>_&lt;Key&gt;</code>çš„è®¿é—®å™¨æ–¹æ³•ã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œå°±è°ƒç”¨å®ƒï¼Œå¹¶ç»§ç»­æ‰§è¡Œ<strong>æ­¥éª¤5</strong>ã€‚å¦åˆ™æ‰§è¡Œæ­¥éª¤2ã€‚</p>
<p>2ã€ å¦‚æœæ‰¾ä¸åˆ°ç®€å•çš„è®¿é—®å™¨æ–¹æ³•ï¼Œåˆ™åœ¨å®ä¾‹ä¸­æœç´¢<code>countOf&lt;Key&gt;</code>å’Œ<code>objectIn&lt;Key&gt;AtIndex:</code>(å¯¹åº”äº<code>NSArray</code>å®šä¹‰çš„åŸºæœ¬æ–¹æ³•)å’Œ<code>&lt;Key&gt;AtIndexes:</code>(å¯¹åº”äº<code>NSArray</code>æ–¹æ³•<code>objectsAtIndexes:</code>)åŒ¹é…çš„æ–¹æ³•ã€‚</p>
<ul>
<li><p>å¦‚æœæ‰¾åˆ°å…¶ä¸­ç¬¬ä¸€ä¸ª(<code>countOf&lt;Key&gt;</code>)ï¼Œä»¥åŠåé¢ä¸¤ä¸ªæ–¹æ³•ä¸­çš„è‡³å°‘ä¸€ä¸ªï¼Œåˆ™åˆ›å»ºä¸€ä¸ªå“åº”æ‰€æœ‰<code>NSArray</code>æ–¹æ³•çš„é›†åˆä»£ç†å¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡ã€‚å¦åˆ™ï¼Œç»§ç»­æ‰§è¡Œ<strong>æ­¥éª¤3</strong>ã€‚</p>
</li>
<li><p>è¯¥ä»£ç†å¯¹è±¡ä¼šå°†å®ƒæ¥æ”¶åˆ°çš„ä»»ä½•<code>NSArray</code>æ¶ˆæ¯è½¬æ¢ä¸º<code>countOf&lt;Key&gt;</code>ã€<code>objectIn&lt;Key&gt;AtIndex:</code> å’Œ <code>&lt;Key&gt;AtIndex:</code>æ¶ˆæ¯çš„æŸç§ç»„åˆï¼Œç»„åˆå°†æ¶ˆæ¯å‘é€ç»™åˆ›å»ºå®ƒçš„<code>KVC</code>å¯¹è±¡ã€‚å¦‚æœåŸå§‹å¯¹è±¡è¿˜å®ç°äº†<code>get&lt;Key&gt;:range:</code>æ–¹æ³•ï¼Œé‚£ä¹ˆä»£ç†å¯¹è±¡ä¹Ÿå°†åœ¨é€‚å½“çš„æ—¶å€™ä½¿ç”¨è¯¥æ–¹æ³•ã€‚ä»£ç†å¯¹è±¡å’Œ<code>KVC</code>å¯¹è±¡ä¸€èµ·ä½¿ç”¨ï¼Œä½¿åº•å±‚å±æ€§çš„è¡Œä¸ºåƒ<code>NSArray</code>ä¸€æ ·å·¥ä½œï¼Œå³ä½¿å®ƒä¸æ˜¯ã€‚</p>
</li>
</ul>
<p>3ã€  å¦‚æœæ‰¾ä¸åˆ°ç®€å•çš„è®¿é—®å™¨æ–¹æ³•å’Œæ•°ç»„è®¿é—®æ–¹æ³•ï¼Œåˆ™æŸ¥æ‰¾<code>countOf&lt;Key&gt;</code>ã€<code>enumeratorOf&lt;Key&gt;</code> å’Œ <code>memberOf&lt;Key&gt;:</code>(å¯¹åº”äº<code>NSSet</code>ç±»å®šä¹‰çš„åŸºæœ¬æ–¹æ³•)ã€‚</p>
<ul>
<li>å¦‚æœè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ‰¾åˆ°äº†ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªå“åº”æ‰€æœ‰<code>NSSet</code>æ–¹æ³•çš„é›†åˆä»£ç†å¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡ã€‚å¦åˆ™ï¼Œæ‰§è¡Œ<strong>æ­¥éª¤4</strong>ã€‚</li>
<li>è¯¥ä»£ç†å¯¹è±¡éšåå°†æ¥æ”¶åˆ°çš„æ‰€æœ‰<code>NSSet</code>æ¶ˆæ¯è½¬æ¢ä¸º<code>countOf&lt;Key&gt;</code>ã€<code>enumeratorOf&lt;Key&gt;</code> å’Œ <code>memberOf&lt;Key&gt;:</code>æ¶ˆæ¯çš„æŸç§ç»„åˆï¼Œå¹¶å‘é€ç»™åˆ›å»ºå®ƒçš„å¯¹è±¡ã€‚ä»£ç†å¯¹è±¡ä¸<code>KVC</code>å¯¹è±¡ä¸€èµ·å·¥ä½œï¼Œä½¿åº•å±‚å±æ€§åƒ<code>NSSet</code>ä¸€æ ·è¿è¡Œï¼Œå³ä½¿å®ƒä¸æ˜¯<code>NSSet</code>ã€‚</li>
</ul>
<p>4ã€å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç®€å•çš„è®¿é—®æ–¹æ³•æˆ–é›†åˆè®¿é—®æ–¹æ³•ç»„ï¼Œå¹¶ä¸”æ¥æ”¶è€…çš„ç±»æ–¹æ³•<code>accessInstanceVariablesDirectly</code>è¿”å›<code>YES</code>ã€‚åˆ™æŒ‰é¡ºåºæœç´¢åä¸º<code>_&lt;key&gt;</code>ã€<code>_is&lt;Key&gt;</code>ã€<code>&lt;key&gt;</code>ã€<code>is&lt;Key&gt;</code>çš„å®ä¾‹å˜é‡ã€‚</p>
<ul>
<li>å¦‚æœæ‰¾åˆ°ï¼Œç›´æ¥è·å–å®ä¾‹å˜é‡çš„å€¼ï¼Œç„¶åæ‰§è¡Œ<strong>æ­¥éª¤5</strong>ï¼›å¦åˆ™æ‰§è¡Œ<strong>æ­¥éª¤6</strong>ã€‚</li>
</ul>
<p>5ã€å¦‚æœæ£€ç´¢åˆ°çš„å±æ€§å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æŒ‡é’ˆï¼Œåªéœ€è¿”å›ç»“æœã€‚<br>å¦‚æœå€¼æ˜¯<code>NSNumber</code>æ”¯æŒçš„æ ‡é‡ç±»å‹ï¼Œå°†å…¶å­˜å‚¨åœ¨<code>NSNumber</code>å®ä¾‹ä¸­å¹¶è¿”å›ã€‚<br>å¦‚æœç»“æœæ˜¯<code>NSNumber</code>ä¸æ”¯æŒçš„æ ‡é‡ç±»å‹ï¼Œè½¬æ¢ä¸º<code>NSValue</code>å¯¹è±¡å¹¶è¿”å›å®ƒã€‚</p>
<p>6ã€å¦‚æœæ‰€æœ‰å…¶ä»–æ–¹æ³•éƒ½å¤±è´¥ï¼Œåˆ™è°ƒç”¨<code>valueForUndefinedKey:</code>ã€‚è¿™åœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯<code>NSObject</code>çš„ä¸€ä¸ªå­ç±»å¯èƒ½æä¾›ç‰¹å®šäºé”®çš„è¡Œä¸ºã€‚</p>
<p>ä¸‹é¢ä¾‹å­æ¼”ç¤ºäº†ä¸Šé¢çš„æ‰§è¡Œæ­¥éª¤ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyValidate</span> : <span class="title">NSObject</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSString</span> *_funName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MyValidate</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)init &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">        _funName = <span class="string">@"ABC"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¥éª¤1</span></span><br><span class="line">- (<span class="built_in">NSNumber</span> *)getNum &#123;</span><br><span class="line">    <span class="keyword">return</span> @<span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setNum:(<span class="built_in">NSNumber</span> *)num &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¥éª¤2</span></span><br><span class="line"><span class="comment">// å†³å®šä»£ç†æ•°ç»„å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line">- (<span class="built_in">NSUInteger</span>)countOfArr &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•è¿”å›å€¼ä¾æ¬¡ä½œä¸ºä»£ç†æ•°ç»„çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">// [ [123,], [456,], [???,] ]</span></span><br><span class="line"><span class="comment">//- (NSArray *)objectInArrAtIndex:(NSUInteger)index &#123;</span></span><br><span class="line"><span class="comment">//    switch (index) &#123;</span></span><br><span class="line"><span class="comment">//        case 0: return @[@"123"];</span></span><br><span class="line"><span class="comment">//        case 1: return @[@"456"];</span></span><br><span class="line"><span class="comment">//        default:  return @[@"???"];</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæœªå®ç° objectIn&lt;Key&gt;AtIndex: åˆ™æ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œè¿”å›å€¼ä¸ºæ•°ç»„ç±»å‹ï¼Œä¾æ¬¡å–è¯¥æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºä»£ç†æ•°ç»„çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">// [123, 456, ???]</span></span><br><span class="line">- (<span class="built_in">NSArray</span> *)arrAtIndexes:(<span class="built_in">NSIndexSet</span> *)indexes &#123;</span><br><span class="line">    <span class="keyword">switch</span> (indexes.firstIndex) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: <span class="keyword">return</span> @[<span class="string">@"123"</span>, <span class="string">@"a"</span>];</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: <span class="keyword">return</span> @[<span class="string">@"456"</span>, <span class="string">@"b"</span>];</span><br><span class="line">        <span class="keyword">default</span>:  <span class="keyword">return</span> @[<span class="string">@"???"</span>, <span class="string">@"c"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¥éª¤3</span></span><br><span class="line">- (<span class="built_in">NSUInteger</span>)countOfAnimal &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›å€¼å¿…é¡»ä¸º NSEnumerator ç±»å‹çš„æšä¸¾å™¨ï¼Œå…ƒç´ ä¸ªæ•°ä¸ countOfAnimal å¿…é¡»å¯¹åº”</span></span><br><span class="line">- (<span class="built_in">NSEnumerator</span> *)enumeratorOfAnimal &#123;</span><br><span class="line">    <span class="built_in">NSSet</span> *set = [[<span class="built_in">NSSet</span> alloc] initWithObjects:<span class="string">@"abc"</span>,<span class="string">@"123"</span>, <span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSEnumerator</span> *enumerator = [set objectEnumerator];</span><br><span class="line">    <span class="keyword">return</span> enumerator;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)memberOfAnimal:(<span class="keyword">id</span>)index &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">@"xxx"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¥éª¤4</span></span><br><span class="line">+ (<span class="built_in">BOOL</span>)accessInstanceVariablesDirectly &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"ğŸ‘‰ %@"</span>, [obj valueForKey:<span class="string">@"num"</span>]);  <span class="comment">// ğŸ‘‰ 123</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"ğŸ‘‰ %@"</span>, [obj valueForKey:<span class="string">@"arr"</span>]);  <span class="comment">//ğŸ‘‰ [123,456,???,]</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"ğŸ‘‰ %@"</span>, [obj valueForKey:<span class="string">@"animal"</span>]);   <span class="comment">// ğŸ‘‰ &#123;(abc, 123)&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"ğŸ‘‰ %@"</span>, [obj valueForKey:<span class="string">@"funName"</span>]);  <span class="comment">// ğŸ‘‰ ABC</span></span><br></pre></td></tr></table></figure>

<h4 id="åŸºæœ¬çš„-Setter-æœç´¢æ¨¡å¼"><a href="#åŸºæœ¬çš„-Setter-æœç´¢æ¨¡å¼" class="headerlink" title="åŸºæœ¬çš„ Setter æœç´¢æ¨¡å¼"></a>åŸºæœ¬çš„ Setter æœç´¢æ¨¡å¼</h4><p><code>setValue:forKey:</code>çš„é»˜è®¤å®ç°ï¼Œç»™å®š<code>key</code>å’Œ<code>value</code>ä½œä¸ºå‚æ•°è¾“å…¥ï¼Œå°è¯•åœ¨<code>KVC</code>å¯¹è±¡å†…éƒ¨è®¾ç½®ä¸€ä¸ªåä¸º<code>key</code>çš„å±æ€§ä¸º<code>value</code>(æˆ–è€…ï¼Œå¯¹äºéå¯¹è±¡å±æ€§ï¼Œä¸º<code>value</code>çš„è§£åŒ…è£…ç‰ˆæœ¬)ï¼Œæ‰§è¡Œä»¥ä¸‹è¿‡ç¨‹:</p>
<p>1ã€æŒ‰é¡ºåºæŸ¥æ‰¾åä¸º<code>set&lt;Key&gt;:</code>ã€<code>_set&lt;Key&gt;</code>çš„ç¬¬ä¸€ä¸ªè®¿é—®å™¨ã€‚å¦‚æœæ‰¾åˆ°ï¼Œå°†<code>value</code>(æˆ–æ ¹æ®éœ€è¦è§£åŒ…å€¼)ä¼ å…¥è°ƒç”¨ã€‚å¦åˆ™ï¼Œæ‰§è¡Œæ­¥éª¤2ã€‚</p>
<p>2ã€å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç®€å•çš„è®¿é—®å™¨ï¼Œå¹¶ä¸”ç±»æ–¹æ³•<code>accessInstanceVariablesDirectly</code>è¿”å›å€¼ä¸º<code>YES</code>ï¼Œåˆ™ä¾æ¬¡æŒ‰åæ¬¡ <code>_&lt;key&gt;</code>ã€<code>_is&lt;Key&gt;</code>ã€<code>&lt;key&gt;</code>ã€<code>is&lt;Key&gt;</code> æŸ¥æ‰¾ä¸€ä¸ªå®ä¾‹å˜é‡ã€‚å¦‚æœæ‰¾åˆ°ï¼Œç›´æ¥ç”¨è¾“å…¥å€¼<code>value</code>ï¼ˆæˆ–å±•å¼€å€¼ï¼‰è®¾ç½®å˜é‡å¹¶å®Œæˆæ“ä½œã€‚</p>
<p>3ã€åœ¨æ²¡æœ‰æ‰¾åˆ°è®¿é—®å™¨æˆ–å®ä¾‹å˜é‡æ—¶ï¼Œåˆ™ä¼šè°ƒç”¨<code>setValue:forUndefinedKey:</code>ï¼Œè¿™åœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯<code>NSObject</code>çš„ä¸€ä¸ªå­ç±»å¯èƒ½æä¾›ç‰¹å®šäºé”®çš„è¡Œä¸ºã€‚</p>
<p>KVC é”®å€¼ç¼–ç ï¼šæ˜¯ä¸€ç§é—´æ¥ä¿®æ”¹/è¯»å–å¯¹è±¡å±æ€§çš„ä¸€ç§æ–¹æ³•ï¼Œkvcè¢«ç§°ä¸ºcocoaçš„å¤§æ‹›ã€‚åœ¨Apple å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œé€šè¿‡ Key-value coding è¿›è¡Œæœç´¢ã€‚</p>
<blockquote>
<p>æœ‰å…´è¶£å¯ä»¥å­¦ä¹ Appleå®˜æ–¹æ–‡æ¡£ä¸­ï¼Œå…³äº <code>Mutable Array</code>ã€<code>Mutable Ordered Set</code>ã€<code>Mutable Set</code>çš„æœç´¢æ¨¡å¼ã€‚</p>
</blockquote>
<h2 id="KVCå­—å…¸è½¬æ¨¡å‹"><a href="#KVCå­—å…¸è½¬æ¨¡å‹" class="headerlink" title="KVCå­—å…¸è½¬æ¨¡å‹"></a>KVCå­—å…¸è½¬æ¨¡å‹</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Status</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>)<span class="built_in">NSInteger</span> ID;  <span class="comment">// ç”¨IDæ¥æ¥æ”¶å­—å…¸ä¸­çš„id</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *source;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="keyword">int</span> reposts_count;</span><br><span class="line"></span><br><span class="line">+ (__kindof Status *)statusWithDict:(<span class="built_in">NSDictionary</span> *)dict;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Status</span></span></span><br><span class="line"><span class="comment">//kvcå®ç°å­—å…¸è½¬æ¨¡å‹</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithDict:(<span class="built_in">NSDictionary</span> *)dict&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">        [<span class="keyword">self</span> setValuesForKeysWithDictionary:dict];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (__kindof Status *)statusWithDict:(<span class="built_in">NSDictionary</span> *)dict &#123;</span><br><span class="line">    <span class="keyword">return</span> [[<span class="keyword">self</span> alloc]initWithDict:dict];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¿å…ä¿è¯æœªæ‰¾åˆ°keyæ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸ç¨‹åºå´©æºƒ</span></span><br><span class="line">- (<span class="keyword">void</span>)setValue:(<span class="keyword">id</span>)value forUndefinedKey:(<span class="built_in">NSString</span> *)key &#123;</span><br><span class="line">    <span class="keyword">if</span> ([key isEqualToString:<span class="string">@"id"</span>]) &#123;</span><br><span class="line">        <span class="keyword">self</span>.ID = value;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"ä¸ºæ‰¾åˆ°key=%@"</span>, key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡<code>KVC</code>æ¥å®ç°å­—å…¸è½¬æ¨¡å‹ï¼Œå…¶åŸç†æ˜¯å…ˆæ‹¿å‡ºå­—å…¸é‡Œçš„<code>Key</code>æŸ¥æ‰¾æ¨¡å‹ä¸­çš„å±æ€§åï¼Œè‹¥æ‰¾ä¸åˆ°åˆ™ä¼šè°ƒç”¨ <code>setValue:forUndefinedKey:</code> æ–¹æ³•é»˜è®¤æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<h2 id="å­¦ä¹ åšå®¢"><a href="#å­¦ä¹ åšå®¢" class="headerlink" title="å­¦ä¹ åšå®¢"></a>å­¦ä¹ åšå®¢</h2><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/KeyValueCoding/index.html" target="_blank" rel="noopener">About Key-Value Coding</a></p>
<p><a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/DevPedia-CocoaCore/Introduction.html#//apple_ref/doc/uid/TP40008195-CH68-DontLinkElementID_2" target="_blank" rel="noopener">Cocoa Core Competencies</a></p>
<p><a href="https://cainluo.github.io/2017/08/03/f1a2a035.html" target="_blank" rel="noopener">è€è€iOSä¸­çš„KVC</a></p>
<p><a href="http://leejunhui.com/2020/02/15/iOS-åº•å±‚æ¢ç´¢-KVC/" target="_blank" rel="noopener">iOS åº•å±‚æ¢ç´¢ - KVC</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">Czm</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/09/15/KVC/">http://yoursite.com/2020/09/15/KVC/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://yoursite.com">Czm</a>ï¼</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/iOS/">iOS</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/09/15/KVO/"><i class="fa fa-chevron-left">  </i><span>KVO</span></a></div><div class="next-post pull-right"><a href="/2020/09/10/UIBezierPath/"><span>UIBezierPath</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By Czm</div><div class="framework-info"><span>é©±åŠ¨ - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>